<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>STC-51单片机闲谈</title>
    <link href="/blog/stc8051-talk/"/>
    <url>/blog/stc8051-talk/</url>
    
    <content type="html"><![CDATA[<h1 id="STC-51单片机闲谈"><a href="#STC-51单片机闲谈" class="headerlink" title="STC-51单片机闲谈"></a>STC-51单片机闲谈</h1><p>STC单片机，这个网站肯定不能不提。（想截个图结果网站访问不了了emm，这网站再我想用的时候崩了不止一次了）</p><p><img src="/blog/stc8051-talk/v2-ca34692eec39b7513465406a2dde1807_1440w.png" alt="STC单片机的网站让我笑喷了"></p><p>现在网站恢复了，可惜它不存在了，已经会自动跳转到论坛。找个网图吧，，我记得最后上面这个大绿块已经开始宣传STC32了。</p><p>我记得之前还是合肥宏晶微电子，现在手册和官网（甚至域名）都变成了<strong>深圳国芯人工智能有限公司</strong>，，，8051想破脑袋也想不出来和AI有啥关系。</p><p>STC是做89C52起家的嘛，单片机人谁还没用过STC89C52。后来做了好多1T内核的产品<del>现代</del>8051单片机。</p><h2 id="C51"><a href="#C51" class="headerlink" title="C51"></a>C51</h2><p>我觉得，现在不选择8051单片机的一大理由是，8051无法使用标准C，而只能使用C51或汇编。这一致命缺陷直接决定了移植其它平台单片机C库的困难性，而且有很多语法都用不了。如果不是为了学8051内核只是为了应用层开发，那么去做8051开发，会很耗费精力和麻烦。</p><p>笔者最初也是先接触的51单片机。之后接触esp32，stm32等支持标准C的单片机后，因为某些原因回来开发stc8，移植库用了三个小时，然后做应用层开发出现各种离奇的问题，一个6个项的枚举，仿真硬是给我仿真出来一个0x0A，，，</p><p>刚接触时我的编程能力也欠佳，用Keil开发也没那么不舒服，近日回来，马上改为EIDE+SDCC+VScode、Keil assistant+VScode。</p><p>SDCC虽然有更好的标准C支持，但有个致命缺陷：</p><blockquote><p>The linker sdld does not support function-level linking. The standard library, therefore, uses one source file per function.</p></blockquote><blockquote><p>It is not possible to eliminate the unused function while linking. </p></blockquote><p><strong>无法删除没有链接的函数</strong>！全都塞最终的hex里！用寄存器还好，用库函数的话简直是，，</p><p>KeilC51都有个LX51可以REMOVEUNUSED，，</p><p>现在，我认为，不支持标准C的，gcc或者armclang(LLVM)不支持的单片机，要尽量避开。</p><p>其一是，开发环境单一，必然很不舒服</p><p>其二，开发中又有各种禁忌，出一堆问题发现是单片机不支持标准C导致的；</p><p>其三，这种单片机要么是51，要么是OTP，要么是远古单片机，要么兼备。</p><p>远古单片机的工具链和开发环境，可谓emm。或者技术比较古早的公司，只会用51，你去了不是折磨你。</p><p>前两者，我想引用别人说的一句话：你做的单片机越便宜，你的工资就越低，只有追求极致成本的公司才会选择OTP，必然也压榨你的人力成本。嵌入式行业，不那么追求四五毛成本的产品多了去了。</p><h2 id="STC8"><a href="#STC8" class="headerlink" title="STC8"></a>STC8</h2><p>STC8是一个比较成熟的产品系列了，而且是STC（目前）主推的8位机产品系列，外设也比较丰富。四年前，我用了我人生中第一块8051后就开始用stc8了，用过sop16，tssop20，lqfp32,dfn8，lqfp64，lqfp48等好多块产品。</p><p>体验比较差的是我的STC8H8K64U了，居然是A版本，，A版本的外部中断，RTC等好多地方都有问题，，我怀疑STC的测试是不是义工，还是干脆找网友测试，还是姚老板催的太急了，还是TSMC不给你流片，产品这么大缺陷就直接量产，，（好像0.18um掩膜也没那么贵</p><p>由此也可以体现出STC的实际实力，，</p><h2 id="STC的库"><a href="#STC的库" class="headerlink" title="STC的库"></a>STC的库</h2><p>STC的应用团队没有人会git就算了，就是同一zip包里面，库还不一致，独立例程有一套大差不差但是版本不同的库，，，我用根目录的库，发现缺几个宏，一看，在独立例程里面是有的，，“独立”</p><h2 id="STC-ARM"><a href="#STC-ARM" class="headerlink" title="STC ARM"></a>STC ARM</h2><p>STC ARM的饼，在我最痴迷STC的那段时间（2020左右）就有了，这句话我真的烂熟于心：</p><p><img src="/blog/stc8051-talk/image-20240205221822525.png" alt="image-20240205221822525"></p><p>2021年的时候，STC官网还有这几句话：</p><blockquote><p>大量客户提前预付定金，支持 STC 提前抢2023年的产能，确保维持 近16年 现货稳定供应的水平，这是大众心态，都是合理正确思维模式。成本持续上升&#x2F;要抢，大势所趋，仓中有米，芯不慌，屯够&#x2F;才是您的&#x2F;不一定让您屯&#x2F;只有长期合作的老客户才可以…</p></blockquote><blockquote><p>大批 STC 客户来电，请求 STC 价格适当调整，有底气去抢晶圆，抢封测产能，不要抢不到晶圆，抢不到封测产能，搞成欧美同行 订货 24 - 48 周 还交不了货，最后遭殃的还是用户。大批 STC 客户来电请求 STC MCU 价格合理上浮，积蓄战力，加速 STC 32-BIT M4 MCU 的推出，将 32-BIT MCU的价格拉回合理价位。</p></blockquote><p>后来变成M33，后来变成STAR-MC1</p><p><img src="/blog/stc8051-talk/image-20240205221935677.png" alt="image-20240205221935677"></p><p>至于为什么到现在都不出，我问老姚，老姚这么说：</p><p><img src="/blog/stc8051-talk/image-20240205222240157.png" alt="image-20240205222240157"></p><p>同一天（2024&#x2F;1&#x2F;14）：</p><p><img src="/blog/stc8051-talk/image-20240205222522791.png" alt="image-20240205222522791"></p><p>《其实已经设计好了》</p><p><img src="/blog/stc8051-talk/image-20240205222551410.png" alt="image-20240205222551410"></p><p>《STC33上面做好的东西都在，往51上移植》</p><p>看来不光我对STC有意见？</p><p><a href="https://www.eet-china.com/mp/a54764.html">网友：“1年之内，都不要浪费时间在STC新出的ARM-M4”，你同意吗？-电子工程专辑 (eet-china.com)</a></p><h2 id="STC32"><a href="#STC32" class="headerlink" title="STC32"></a>STC32</h2><p>STC32我认为是STC比较奇怪的产品线，因为用的是80251核，是英特尔在1996年推出的，不知道STC为什么沉迷于古老的8051系列内核。</p><p>8051还好，Keil，IAR，SDCC有三个编译器可用，80251就只有Keil C251一个编译器了。STC近几年也忙着摸索80251。说来，我之前申请了STC16的样品，后来这产品线就砍了，，</p><p><img src="/blog/stc8051-talk/image-20240205222258939.png" alt="image-20240205222258939"></p><p>另外，STC买了真不少域名啊</p><p>STC新官网：<a href="http://www.stcai.com/">www.STCAI.com</a></p><p>STC官方论坛：<a href="http://www.stcaimcu.com/">www.STCAImcu.com</a></p><p>老官网: <a href="http://www.stcmcudata.com/">www.STCMCUdata.com</a></p><p><a href="WWW.GXWMCU.COM">WWW.GXWMCU.COM</a></p><p><a href="https://www.stcisp.com/">https://www.stcisp.com/</a> （这个的话不是官方的，但是这风格可谓一脉相传，而且宣传语都是这种风格）</p><h2 id="我的二次入坑"><a href="#我的二次入坑" class="headerlink" title="我的二次入坑"></a>我的二次入坑</h2><p>其实根本原因是这个电路板的电路设计和程序设计差了一年多，那个时候我还没见识到标准C的魅力。有一个项目需要很小的封装，本来想上TSSOP20，后来发现DFN8也刚好够用，就用DFN8了。</p><p><img src="/blog/stc8051-talk/image-20240206110315181.png" alt="image-20240206110315181"></p><p>然后，如<a href="C51">C51</a>章节所说的。。</p><p>项目打算重开了，用py32的QFN16&#x2F;20封装。另外py32的DFN8居然比stc8的还便宜，才7毛，，</p>]]></content>
    
    
    <categories>
      
      <category>嵌入式</category>
      
      <category>闲谈</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>my-2023</title>
    <link href="/blog/my-2023/"/>
    <url>/blog/my-2023/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
    <tags>
      
      <tag>年终总结</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我的生物钟与睡眠问题</title>
    <link href="/blog/my-sleep-issue/"/>
    <url>/blog/my-sleep-issue/</url>
    
    <content type="html"><![CDATA[<p>今天又是生物钟崩溃的一天，直接原因是前天晚上12点睡觉。</p><p>今天想写一写我自己的睡眠问题。</p><p>日后我的问题缓解或者去做了诊断会来更新。</p><h1 id="紊乱感"><a href="#紊乱感" class="headerlink" title="紊乱感"></a>紊乱感</h1><p>我实在没有找到一个专业医学名词来描述这个现象，因此生造了这一个词，望谅解。我认为这种感觉和生物钟紊乱，内分泌紊乱可能有些关系，而且这个状态下精神是很紊乱的。</p><p>我现在的状态是：极度瞌睡又极度精神，眼睛疲惫但是不想睡觉，刚躺下就想起来，起来后又想躺下。</p><p>生理上的感觉不太好描述，但是是明确的感觉，而不是心理性感觉。我的比方是，打哈欠打不出来的感觉的n倍而且一直持续。</p><p>紊乱感在我身上分为好些种严重程度。</p><h2 id="A级"><a href="#A级" class="headerlink" title="A级"></a>A级</h2><p>**发生时间 **经常发生在瞌睡但是去做了运动后，或是瞌睡但是思维被一些耗费精力的事情用了一段时间后（描述有点奇怪）</p><p><strong>症状</strong> 打哈欠打不出来的感觉的3倍，大脑生理性排斥思考，但是精神尚可做一些简单的事情，比如读小说。读理论文章或是数学则会被大脑生理性排斥，难以集中注意力。趴下睡觉后完全无法睡着，几分钟后感觉状态有所缓解就不想再睡了，起来一分钟后症状100%恢复。</p><p><strong>持续时间</strong> 1-2小时</p><p>我有明确感受到这种状态的开始时间大概是2023年夏秋之交，之后就频繁出现甚至是每天。</p><h2 id="AAA级"><a href="#AAA级" class="headerlink" title="AAA级"></a>AAA级</h2><p>**发生时间 ** 睡晚了之后或失眠后</p><p><strong>症状</strong> 打哈欠打不出来的感觉的10倍，难受地要命，无法干任何事情，在不借助药物的情况下几乎完全无法入睡，几乎只能趴着或者躺着才能舒服一点。完全无法集中注意力，在闭眼的时候无法属羊甚至是想一些平时想的容易入睡也不太无聊的事情，注意力无法控制，记忆力衰退严重。使用药物睡着后，第二天早上可能会恢复，也可能按时醒来无法入睡，然后继续这种感觉。完全无法缓解，在一些无法睡觉的环境下令人崩溃。</p><p><strong>持续时间</strong> 1-2天</p><h1 id="生物钟"><a href="#生物钟" class="headerlink" title="生物钟"></a>生物钟</h1><p>我很久之前就将我的睡眠问题和生物钟建立联系。因为我的睡眠问题有明显的时期性，可能连着好几周都睡得很好，然后好几周睡得不好。</p><p>而且我的生物钟明显地越来越脆弱，至今已经十分脆弱，12点睡觉就导致生物钟爆炸。</p><h1 id="药物"><a href="#药物" class="headerlink" title="药物"></a>药物</h1><p>我大概吃了安神补脑液，脑心舒口服液，褪黑素和维生素D，钙片这几种。</p><p>安神补脑液和脑心舒口服液，我个人感觉可能是心理作用大一点。我并没有直观感受到药效。</p><p>褪黑素我个人感觉就是一个安眠药效果，而且作用时间比较有限，完全不会影响到第二天。</p><p>我的是汤臣倍健的坑爹价格的一瓶，2mg多一粒，60粒，在药店买的，一百多块钱。平常的话我吃二分之一粒，三分之一粒就能很快睡着。紊乱感的话，至少要吃二分之一粒。</p><p>维生素D，钙片算是补品，有人说能调节睡眠吧。</p><h1 id="发展历程"><a href="#发展历程" class="headerlink" title="发展历程"></a>发展历程</h1><p>可以说，我真的是一步一步跨越心理障碍，到现在，我的失眠感觉基本是身体生理问题和无法避免的环境压力。</p><p>刚开始，2022年夏，在考试前有比较随机的失眠症状，那个时候的精神也比较好，每天都是11点多睡（复习备考），六点起，白天并无太多难受感，也没有紊乱感。</p><p>2022年秋，就演变为随机的失眠，可能和心理暗示有一定关系，毕竟，<strong>有不少轻度失眠患者都是觉得自己是失眠患者，然后加重了自己的症状</strong>。</p><p>当然，更重要的原因是环境压力。</p><p>2023年，情况加剧，但都是比较随机性的出现，可能好几天都睡得好，好几天都睡得不好。</p><p>2023年秋服用安神补脑液和脑心舒口服液。</p><p>2023年10月末开始，无论是否睡好，白天会一直瞌睡，从早上瞌睡到晚上。</p><p>2023年12月开始偶尔服用褪黑素。</p><p>2024年1月情况相当严重。无论是否睡好，白天会一直瞌睡，从早上瞌睡到晚上，常常伴有紊乱感，白天不容易睡着，除非生物钟特别舒适的时候。</p><p>1月时，普通的12点睡觉就已经会导致生物钟彻底紊乱，导致第二天难受地要命，1月已经出现三四次这种情况。</p><h1 id="日记记录（部分）"><a href="#日记记录（部分）" class="headerlink" title="日记记录（部分）"></a>日记记录（部分）</h1><h5 id="2022年10月12日"><a href="#2022年10月12日" class="headerlink" title="2022年10月12日"></a>2022年10月12日</h5><p>我生物钟没乱的时候，我的失眠就完全是心理原因。我觉得时间太晚了，再睡不着明天就要打瞌睡了，然后就会着急，一急就完蛋了，就睡不着了，一急还会大喘粗气，呼吸不畅。</p><h5 id="2023年3月23日"><a href="#2023年3月23日" class="headerlink" title="2023年3月23日"></a>2023年3月23日</h5><p>最近一段时间中午都能睡着了。</p><h5 id="2023年3月30日"><a href="#2023年3月30日" class="headerlink" title="2023年3月30日"></a>2023年3月30日</h5><p>我似乎是达尔文进化的残次品。晚上睡觉时，我一旦想到“睡着”这两个字，便睡不着。只有想点别的。彻底把“睡着”这个目的忘掉，才能睡着。这是很难的。如果过一会没睡着。就会急，一急，又睡不着了，完了。<br>终极解决方案是，起床，看半个小时以上的书，再躺二十分钟。<br>为什么我的意志是睡着，但却总是睡不着，若没有意志却能睡着？为什么我的身体会违背我的意愿？</p><p>挣扎。</p><h5 id="2023年5月17日"><a href="#2023年5月17日" class="headerlink" title="2023年5月17日"></a>2023年5月17日</h5><p>我又要拿出我的精力有限论了。今天上午没怎么睡，中午睡了一觉。现在精力又用完了。平常的上午肯定要睡，要犯好久瞌睡。今天没有。由此观之，我需要的睡眠时间是十个小时。<br>什么时候才能步入睡十个小时的晚年生活，摆脱这一神经衰弱的衰样！</p><p>……</p><p>最近一个月大于一半的日子的中午都能睡着了，我睡觉就想，反正睡不着，那就……</p><h5 id="2023年5月21日"><a href="#2023年5月21日" class="headerlink" title="2023年5月21日"></a>2023年5月21日</h5><p>最近一周生物钟很顺。…… 可以很快睡着。真的很爽。睡得很舒服。就是早上五点会醒一次。</p><h5 id="2023年5月24日"><a href="#2023年5月24日" class="headerlink" title="2023年5月24日"></a>2023年5月24日</h5><p>呜呜，中午又没睡着。好难受。<br>我发现我的状态很大程度上取决于我的生物钟是否合适和天气情况是否令我燥热。<br>我的生物钟好脆弱。上周和上上周生物钟好的不行，可这周又莫名其妙崩溃了，又睡不着了，</p><h5 id="2023年5月25日"><a href="#2023年5月25日" class="headerlink" title="2023年5月25日"></a>2023年5月25日</h5><p>最近经常感到身体不适。唉。生物钟一乱，大半天都要坠入打哈欠打不出来的痛苦中。基本学不进去。 …… 生物钟不乱还好，睡一觉就补回来了，今天早上睡了一整个早上，上午很有精力，然后，中午开始头晕，晕到现在。身体不适总是让人心情不好。</p><h5 id="2023年5月26日"><a href="#2023年5月26日" class="headerlink" title="2023年5月26日"></a>2023年5月26日</h5><p>（上午）瞌睡，现在还好点，是能睡着那种。昨晚十一点多才睡着，还好，头不晕了。<br>……<br>（下午）中午又没睡着，想哭，好难受，难受。</p><h5 id="2023年6月23日"><a href="#2023年6月23日" class="headerlink" title="2023年6月23日"></a>2023年6月23日</h5><p>(下午6:28)今天瞌睡了一整天啊！今天中午是依旧没有睡着，一点十几快要睡着的时候，突然抽了一下就醒了，最近好像经常这样。</p><p>7:10 想睡觉。现在我的精神状态相当糟糕。</p><p>7:50 现在又处于那种精神非常不佳的状态了。刚才课间趴了一会，根本没有睡意而且很难受，而且很瞌睡，又是生物钟紊乱的感觉。</p><h5 id="2023年6月24日"><a href="#2023年6月24日" class="headerlink" title="2023年6月24日"></a>2023年6月24日</h5><p>上午9:55 什么是生物钟紊乱的快感啊，可真的太难受了。注意力和思考精力全部如数丧失。真的太难顶了。……<br>上午10:06 回忆起初中的时候，晚上是不想睡着太早的，因为明天即是痛苦的一天，所以并不想早点睡，享受一个人在大脑里的时间也是很美好的。还有几次爬趴在窗户上看雨。雨真的很美。<br>……  那个时侯，大家似乎都不怎么需更怎么睡眠，<br>下午3:13 中午不负众望地，没有睡着，中午觉得很累，想一些事就觉得很累，想不了。既即使这样，依旧没有睡着。<br>现在觉得很虚，很累，很瞌睡，很难受，拿笔都没劲儿的感觉。<br>晚6:35 今天又是困了一天。昨晚睡着地也不早。</p><h5 id="2023年7月3日"><a href="#2023年7月3日" class="headerlink" title="2023年7月3日"></a>2023年7月3日</h5><p>上午8:24 生物钟又坏了，想打哈欠又打不出来的痛苦。难以承受。<br>上午10:03 生物钟错乱了，好令人难受啊，……<br>睡不够是个大问题，也许吧。<br>11:07 还是难受，生物钟失调的时候，</p><h5 id="2023年8月25日"><a href="#2023年8月25日" class="headerlink" title="2023年8月25日"></a>2023年8月25日</h5><p>上午10:42 这周又是星期数和日期个位数相同的一周，感觉好几个月才会碰到一次.<br>瞌睡是很折磨人的，我这种亢奋瞌睡，趴那里不仅没法缓解而且难受，也睡不着，精神比真的瞌睡时亢奋，比清醒时又无力很多，打哈欠又打不出来，那种感觉，不知道怎么描述。总之非常难受，比正常瞌睡难以消减的多，相比之下，正常的瞌睡是真舒服，昨晚似乎也睡得不差，真要命。</p><h5 id="2023年10月20日"><a href="#2023年10月20日" class="headerlink" title="2023年10月20日"></a>2023年10月20日</h5><p>上午11：53 头晕、失眠感，<br>这几天生物钟紊乱了后，天天和这种感觉打仗了、晚上入睡困难，十一点多才能入睡，上午早上完全睡不着，补觉也补不得，早上五点三十多就醒了，然后睡不着，非常难受。</p>]]></content>
    
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>老天不想让我做充电宝</title>
    <link href="/blog/power-Bank-errors/"/>
    <url>/blog/power-Bank-errors/</url>
    
    <content type="html"><![CDATA[<h1 id="老天不想让我做充电宝"><a href="#老天不想让我做充电宝" class="headerlink" title="老天不想让我做充电宝"></a>老天不想让我做充电宝</h1><p>做充电宝。</p><p>请务必看到幺蛾子大赏部分。</p><h2 id="我之前的"><a href="#我之前的" class="headerlink" title="我之前的"></a>我之前的</h2><p>我之前的充电宝实在是，太像太像定时炸弹了（亚克力加螺柱结构，不久亚克力就烂掉了，之后就越来越破，这是遗照</p><img src="power-Bank-errors/85ecacedc1b18e0473b383b063a682a.jpg" alt="85ecacedc1b18e0473b383b063a682a" style="zoom: 50%;" /><p>之所以有一点纸屑，是因为怕亚克力外壳烂掉之后，螺丝或者针脚戳到电池把电池戳破（其实已经戳出来坑了，但是没破，亡羊补牢垫了点纸，后来纸掉出来一部分，就变成这个样子了</p><p>用的是淘宝去年或者前年买的IP5108电路板，没有上过机，我买到后，发现背面加焊了个0805大电容，而且PCB还是连在一起的，V割和邮票孔都没掰，microUSB定位柱也没上锡，而且不是故障品。当时是六毛还是八毛一片，买了五片。</p><img src="power-Bank-errors/image-20231125234707946.png" alt="image-20231125234707946" style="zoom:80%;" /><p>左边那一片为我服役了两年，现在重新回到易封袋里面，回到充电宝主板的纸盒子里，等待下次使用。</p><p>IP5108是10W充电芯片，四灯电量显示。这两年，充电宝主板我至少买了60片各种方案的充电宝主板，全是捡的电子垃圾。盒子里还有38片没有用的。英集芯的比较多，其次有ETA9740，智融等。我大多用作制作手持灯了，或者用作电路改装之类，因为其实质就是高效率的 <strong>锂电池保护充电加升压加电量显示模块</strong>。就是大部分芯片的升压会在负载过小的时候自动关断。<strong>ETA9740虽然说持续5V低功耗升压，但是如果接低功耗负载的话，电感会响，而且接LED可看见肉眼可见的闪烁（忽亮忽暗）</strong></p><img src="power-Bank-errors/image-20231125235115153.png" alt="image-20231125235115153" style="zoom:50%;" /><p>五毛到两块钱不等，大多都是六毛一左右片买的，这种电子垃圾店的充电宝主板，不少是板子做出来了但是不打算生产充电宝的板子，这种板子质量好。</p><p>有一大部分是质检没通过的产品，这种基本寄，我买到过两批，二十片左右，修好的概率在50%，但是即使当时修好，但是返修率极高，比如漏电，用了几个月就坏掉等。</p><p>还有一部分是拆机的，是厂家回收自己的产品也不知道怎么着，还是哪些充电宝回收的人拆下来的板子，不好说。但是这些板子一般是常见方案，都不是大牌子货。</p><h2 id="立项"><a href="#立项" class="headerlink" title="立项"></a>立项</h2><p>我今年夏天，去坐火车去成都玩，同行一人的父母是铁路上的，我问过我这充电宝能不能带上去，他父母说可以，但是安检被截了，，，，，也算是我倒霉，刚刚好那几天是成都大运会（我不是奔这个去的，也只在成都的街头随意散步的时候偶然看到了从体育场出来的浩荡人群），安检特别严。还好有送行的人可以帮我把充电宝带回去了。</p><p>我决定，做以假乱真的充电宝！</p><p>既然是自己做，就自己画板子，自己做！不再用成品板了，这种板子要么接口不达标（没有TypeC或者只有一个USB），要么是定位设计的比较奇葩，要么是功率太小，主要是都没有百分比电量显示。百分比电量显示这东西真的非常有用。于是决定自己做，而且自学SW。</p><p>本来是打算用IP5306 I2C，用AIR001直驱&#x2F;+TM1650做电量显示，后来发现IP5506-BZ-188支持直接驱动188数码管。那还何苦动用单片机！（其实支持数码管显示的型号不少）（之所以用AIR001，是因为嫖了10片，而且有开发板，不然用py32是更实惠的）</p><p>其实我早就看到有一些型号标注着数码管，当我看到188数码管只有五根引脚的时候，我以为是这种，，</p><p><img src="/blog/power-Bank-errors/image-20231126000640454.png" alt="image-20231126000640454"></p><p>后来在淘宝上看到了电子垃圾电路板的实物图，发现确实是货真价实的188数码管，后来看手册，发现这数码管结构如图：</p><img src="power-Bank-errors/image-20231126000832642.png" alt="image-20231126000832642" style="zoom: 80%;" /><img src="power-Bank-errors/image-20231126000819064.png" alt="image-20231126000819064" style="zoom:80%;" /><p>这IO利用率可真高。。</p><h2 id="硬件设计"><a href="#硬件设计" class="headerlink" title="硬件设计"></a>硬件设计</h2><p>使用IP5506充电宝SOC。注意，IP5506有三个细分型号，其中IP5506-BZ-188是支持数码管的，其余两种手册中的型号是否有出货，我持怀疑态度，我猜可能没。</p><p>另外这些芯片里是有一个单片机的，同一个芯片有不同的版本，极有可能是不同的固件。似乎还支持订制数码管显示，可能是一颗8051 OTP？</p><p><img src="/blog/power-Bank-errors/image-20231126001438243.png" alt="image-20231126001438243"></p><p>LED使用BP1808驱动，支持模拟调光和数字调光，设置输出功率，3-60V输入输出范围，看着符合要求。常用的PT4115最低输入是5V或者6V（因厂商而异），锂电池是3-4.2V，应该用不了，但是我看有人这么用。</p><p><img src="/blog/power-Bank-errors/image-20231126001309070.png" alt="image-20231126001309070"></p><p>原理图</p><p><img src="/blog/power-Bank-errors/Schematic_PowerBank1.1_2023-11-26.png" alt="Schematic_PowerBank1.1_2023-11-26"></p><h2 id="外壳设计"><a href="#外壳设计" class="headerlink" title="外壳设计"></a>外壳设计</h2><p>今年夏自学了几天SW，国庆把SW教程看完了，比较好上手，没有想象中那么难。第一次在3D打印机群（我三年前做写字机，卖主板进的群）找了个0.2&#x2F;g的ABS代打。3D打印群里有不少自己组的机器接代打，pla0.15左右，abs0.2左右。这家精度不太行，侧面完全糊掉了，接口做的比较难看，但是没有东西的长侧面和有车床的地面相当不错。</p><img src="power-Bank-errors/922c7257731291d2c4fb2cad9b05bc3.jpg" alt="922c7257731291d2c4fb2cad9b05bc3" style="zoom:50%;" /><p>侧面的层极易断裂，底面非常坚固（因为有个壳颜色错了，这台是给别人做的，我只好重打，所以把旧的掰了试了试），也不知道是ABS的特性，还是这位3D打印机的特性，还是用的ABS料比较差。</p><p>两个大小不同，一共30，邮费12。</p><p>第二次的效果就好多了。咸鱼找的大店，不是 个人，pteg 0.2&#x2F;g接了我的单，河南老乡。pteg密度大不少，虽然这次减了点厚度，但是一共45，河南老乡给我包了邮。</p><p>误差非常小，虽然竖直圆形还是偏椭圆，但是两个外壳拼合得比上回好太多了，堪称完美，不用修剪就拼上了（0.2-025mm配合间隙），第一批还修剪了一点，还是翘而且上螺丝有形变弹力。这次上螺丝完全没形变。而且坚固性也不错，加热也没有异味，修整后也不难看，这料子真轩。</p><p><img src="/blog/power-Bank-errors/9cde15ea7d2262956051c210f0c8dfd.jpg" alt="9cde15ea7d2262956051c210f0c8dfd"></p><h2 id="第一批"><a href="#第一批" class="headerlink" title="第一批"></a>第一批</h2><h2 id="第二批（幺蛾子大赏）"><a href="#第二批（幺蛾子大赏）" class="headerlink" title="第二批（幺蛾子大赏）"></a>第二批（幺蛾子大赏）</h2><p>以下记录经过大量编辑修改，本来的聊天对象不懂电子就没有电子名词，已经加上。2023&#x2F;11&#x2F;25一整天，就是在这样的折腾中结束的。</p><p>这一定是报应，我要反思我最近做错了什么。</p><p>xxx 2023&#x2F;11&#x2F;25 22:51:51<br>今天实在是太倒霉了</p><p>xxx 2023&#x2F;11&#x2F;25 22:53:05<br>请听我细细道来</p><p>xxx 2023&#x2F;11&#x2F;25 22:54:12<br>这次的电路板已经是我成功做了两片的电路板（已经验证过），按理说不应该出什么幺蛾子了<br>1.焊接好之后，发现两片的灯都有问题，调高亮度到一定值之后就开始亮度降低，后来发现这个只是IP5506给BP1808初次通电的问题，可是我明明已经重启过，总之是莫名其妙好了</p><p>当时量的时候，TJ431电压很怪，不知道是万用表的误判断，还是TJ431没运行起来。（我的万用表已经快不行了，我每次量都要好久才能或得到正确的结果，比如确认431正常工作）</p><p>xxx 2023&#x2F;11&#x2F;25 22:54:49<br>2.在测试上面的问题的时候，发现芯片的电压保护设置引脚的电压不会变，所以怀疑上面的问题是电压保护的问题，过压限制了，然后发现刚好电压保护那里有一颗电阻虚焊（R10），但是整好之后，问题依然没有解决（后来发现只是初次通电的问题）</p><img src="power-Bank-errors/image-20231126014847306.png" alt="image-20231126014847306" style="zoom:50%;" /><p>xxx 2023&#x2F;11&#x2F;25 22:55:29<br>3.有一片刚开始发现不能调亮度，量的时候发现431正常工作，但是调节电压不会变化，后来发现又是一颗电阻虚焊（与电位器串联的一个电阻）</p><p>xxx 2023&#x2F;11&#x2F;25 23:05:16<br>4.电池的极片上不了锡，我用尽我所有的助焊剂（焊油锡浆，稀盐酸金属助焊剂），上了一个小时，才在电池上面焊了导线。</p><p>xxx 2023&#x2F;11&#x2F;25 23:06:11<br>5.把导线焊在电路板上面时，电路板上面的电池焊盘掉了，，，只好从别处又引一根线出来，从螺丝孔钻到对应位置，在外壳上把这个螺丝孔烫掉，再将两根线连在一起</p><p>xxx 2023&#x2F;11&#x2F;25 23:06:25<br>6.开关焊上之后发现歪了 没办法 我的手艺基本上没办法调整（这是重新焊接的时候发生的事情了）</p><p>xxx 2023&#x2F;11&#x2F;25 23:08:50<br>7.插上电之后发现数码管不能正常显示，缺段，我以为是数码管没焊好，加焊了一次，数码管正常了一点，然后我就接着加焊，加焊老半天可是没有用了，我以为是数码管内部坏了，就把数码管拆下来，换了一个， 拆下来的时候，量了一量通断，烫坏了一根电路板里面的线，背面的焊盘也掉了不少，没办法，新的数码管就只能悬空焊上去</p><p>xxx 2023&#x2F;11&#x2F;25 23:09:28<br>8.焊上去之后依然老问题，而且悬空焊接很不结实，碰了一下又掉了，我又想用直插电阻来搭桥，又搭了半天，搭到最后两根的时候反复焊接出错了五六次（焊上最后一根，倒数第二根掉了，我用的刀头），又搞掉一个焊盘</p><p>xxx 2023&#x2F;11&#x2F;25 23:10:13<br>9.没办法，我只能将这个电路板上所有能拆的元件全都搬到另一张空电路板上，重新开始。这次不使用铁板烧了，用热风枪吹。此外，拆下来的每个元件都很黏，都黏在镊子上，只好一个一个拆，拆一个，热风枪放下，用两个镊子把元件放在新的板子上，同时查明之所以数码管显示有问题，是又一颗数码管的限流电阻虚焊了</p><p>你撤回了一条消息</p><p>xxx 2023&#x2F;11&#x2F;25 23:11:18<br>10.我少一颗USB母座，所以本来只多一颗，旧的电路板上这个母座没办法拆掉，导致现在变成了少一颗，又要去重新订购，而且又不小心烙铁碰坏了一个电位器的塑料部分，也没法利用了</p><p>你撤回了一条消息</p><p>xxx 2023&#x2F;11&#x2F;25 23:12:23<br>11.新的电路板焊接完毕之后，发现按键没有效果，以为是按键虚焊，又把电位器翘起来检查按键（这两个插件正反面在同一个位置），反复测量阻值和电压，发现确实是按键没有焊好（之前不是说焊歪了，又导致接触不良）</p><p>xxx 2023&#x2F;11&#x2F;25 23:13:41<br>12.重新焊接之后发现。按下按键的时候，数码管会出现波动，而且按键的作用异常，双击无法关机，无法打开灯，拆掉这条线上的其它电路，都不行，从不同的角度按下按键，会有不同的效果，我以为按键内部损坏，就又把按键给拆掉，重新焊接一个</p><p>xxx 2023&#x2F;11&#x2F;25 23:14:21<br>13.烙铁不化锡，把按键这几个过孔给弄干净，又花了可长时间，烙铁感觉温度不够，但是已经烧红了，又掉了焊盘。</p><p>你撤回了一条消息</p><p>xxx 2023&#x2F;11&#x2F;25 23:17:57（调整了顺序）<br>16.焊按键之后，发现按键依然无效，经过测量发现电路板里的线又断了，只好再次飞线，因为飞线可能占用电位器空间，只能在按键上方未引出的金属引脚强行焊上了一根线，又飞了一根线，从刚才的螺丝孔穿过去，才把按键修好</p><p>xxx 2023&#x2F;11&#x2F;25 23:16:50（调整了顺序）<br>14.焊接按键完毕之后发现按键依然有问题，经过仔细排查，发现有一根极小的铜线，不知怎么的焊接在了两颗电阻的中间（可能是从上一块板子拆下来的时候带上去的），简直难以看到，去除之后，从镊子触发按键的点 不再有副作用</p><p>你撤回了一条消息</p><p>xxx 2023&#x2F;11&#x2F;25 23:16:16（调整了顺序）<br>15.因为电池的线比较粗，所以柔韧度比较差，弄着弄着就把电池的极耳（就是电池上面的焊接片）弄断了，幸好留了一点根儿，得以重新补线，不然这电池就报废了</p><p>xxx 2023&#x2F;11&#x2F;25 23:19:50<br>17.按键修好之后，发现我又把电位器给烫坏了，现在一个电位器都没了，又要去买，而且电位器的焊盘也快要掉了，如果掉了的话又要飞线</p><p>xxx 2023&#x2F;11&#x2F;25 23:20:24<br><img src="power-Bank-errors/image-20231126020508845.png" alt="image-20231126020508845" style="zoom:50%;" /></p><p>xxx 2023&#x2F;11&#x2F;25 23:20:25<br><img src="power-Bank-errors/image-20231126020439644.png" alt="image-20231126020439644" style="zoom:50%;" /></p><p>xxx 2023&#x2F;11&#x2F;25 23:21:52<br>18.3D模型设计依然是有一点点问题，两种不同规格的typec口，有一种可以正常放下，另一种放不下，然而我焊接的时候是随机拿的，焊上去之后就没法拆了，还好，这个外壳材料烫出来也并没有像之前那么难看</p><p>xxx 2023&#x2F;11&#x2F;25 23:23:02<br>19.折磨了我一整天的烙铁，虽然已经开暖气了，因为要焊接就开了窗户穿了袄，不知道是不是因为气温的原因，今天电烙铁温度开得很高，也很难化锡，烙铁在黑暗环境下可以看出来已经红了，就是死活不化锡。设置450度化一个小焊盘的无铅锡居然要十秒朝上，大焊盘要半分钟，有的时候快，有的时候奇慢，有的时候根本化不开。后来温度就开高，因此掉了不少焊盘，但化锡还是超级慢，清焊盘很麻烦，还老是掉焊盘。然后今天晚上比较绷不住的时候，就拿着烙铁往桌子上锤了两下（桌子上垫有一本书），然后烙铁头就弯了，，</p><p>为了换烙铁头，需要把它掰直，我没找到尖嘴钳，就用剥线钳的尖的地方，在凉的时候也很容易掰过来了。</p><p>xxx 2023&#x2F;11&#x2F;25 23:23:15<br><img src="/blog/power-Bank-errors/image-20231126020838253.png" alt="image-20231126020838253"></p><p>xxx 2023&#x2F;11&#x2F;25 23:24:29<br>20.我的万用表大概是没办法继续用了，现在好多档都有问题，什么都没接，居然告诉我电压超量程，量着一个稳定电源（4v），从10伏在20伏中间跳来跳去，现在故障时间大概是70%左右了，我只能量好些次找到一个正常值。量一次需要频繁开关万用表和换挡才能正确测量。</p><p>xxx 2023&#x2F;11&#x2F;25 23:25:56<br>21.我都不知道我运气是好还是差了，剪东西的时候，有一颗东西弹了起来（大概也就一mm大小），幸好当时眨了一下眼 那个东西从眼皮上弹走了，我听到了他落在20厘米外的声音，假如没眨眼，不堪设想，我赶紧去把护目镜带上，护目镜用的塑料是普通塑料，不耐磨，现在已经模糊的不行了，已经下单新的了</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>AIR001-Clion/VScode优雅环境配置</title>
    <link href="/blog/air001introduction/"/>
    <url>/blog/air001introduction/</url>
    
    <content type="html"><![CDATA[<h1 id="AIR001-Clion-VScode优雅环境配置"><a href="#AIR001-Clion-VScode优雅环境配置" class="headerlink" title="AIR001-Clion&#x2F;VScode优雅环境配置"></a>AIR001-Clion&#x2F;VScode优雅环境配置</h1><p>合宙是真会和工程师打关系啊，没事看看合宙公众号看有没有新活动已经是日常了，，</p><p>合宙这AIR001没套stm32的模板，我也不知道该说是好事还是坏事了属于，，（不过也是HAL库）</p><p>这篇文章几乎是踩坑，以供参考。</p><p>本文尝试配置了</p><table><thead><tr><th>环境</th><th>基于</th><th>推荐度</th><th>本文章</th></tr></thead><tbody><tr><td>Arduino support-Clion环境</td><td>老版Arduino</td><td>1%</td><td>尝试失败</td></tr><tr><td>VScode-Arduino环境</td><td>Arduino CLI</td><td>30%</td><td>基本成功</td></tr><tr><td>HAL-CMake-Clion-PyOCD环境</td><td>armgcc-Cmake</td><td>90%</td><td>成功</td></tr><tr><td>借用py32的makefile</td><td>armgcc-makefile</td><td>-</td><td>-</td></tr></tbody></table><p>截止至2023年9月30日，PlatformIO不支持Air001.详情：<a href="https://github.com/Air-duino/Arduino-AirMCU/issues/4">需要有人适配platfromIO · Issue #4 · Air-duino&#x2F;Arduino-AirMCU</a></p><img src="air001introduction/image-20230930133008958.png" alt="image-20230930133008958" style="zoom:50%;" /><h2 id="AIR001"><a href="#AIR001" class="headerlink" title="AIR001"></a>AIR001</h2><p>合宙Air001是一款TSSOP20封装的MCU，采用高性能的32位ARM®Cortex®-M0+内核，最大48Mhz，内置32Kbytes的Flash和4Kbytes的RAM。芯片集 成多路USART、IIC、SPI等通讯外设，5个16bit定时器以及1路12bit ADC和2路比较器。</p><p>我也好奇合宙的命名，以后不打算做同系列产品了嘛，直接叫Air001，我还是挺期待LQFP32、QFN32产品，因为tssop20的引脚总是不够用。</p><p>其实，AIR001是py32f002A&#x2F;py32f003&#x2F;py32f030的<del>贴牌</del>同源产品。py（普冉）是最近几年卷m0核市场的，它自己的三个系列（002A&#x2F;003&#x2F;030）就是同一块晶圆，通过HAL库和封装来实现区分。所以，网上才有002A开PLL，开USART2,开内存等操作。py32的<del>贴牌</del>同源产品不只有air001，还有XL32f002（芯岭，普冉一级代理）等。</p><p>虽然py32f002A比air001便宜，前者tssop20才六毛钱不到，但是论标注保证性能，air001是py32f030级别的。py32f030大概一块钱，air001 0.76元。要是用py32f002A datasheet里面没有的功能和性能，出了问题也没法不是？</p><h2 id="Arduino"><a href="#Arduino" class="headerlink" title="Arduino"></a>Arduino</h2><p>我个人是不太喜欢Arduino风格，不过，用Arduino可以少学一套API，又有一大堆库可用。</p><p>Arduino AIR001适配（社区项目<a href="https://github.com/Air-duino">Air-duino</a>），看commit，基本是<a href="https://github.com/HalfSweet">半糖</a>做的，我一直以为半糖是合宙的人，后来才知道是大学生，我以为合宙会开点赞助，在群里问了问，只赞助了点开发板和技术支持，，感觉有点，，AIR001可是用Arduino支持做了宣传的啊</p><p>另一个贡献者是<a href="https://github.com/chenxuuu">晨旭</a>，应该是合宙的人。</p><p>半糖这大佬是真牛。</p><p>因为PlatformIO不支持Air001，就只能配置Arduino插件。</p><h2 id="调试器"><a href="#调试器" class="headerlink" title="调试器"></a>调试器</h2><p>Air001目前并不支持openDCD，支持pyOCD。</p><p>pyOCD的易用性也不错，而且支持CMSIS PACK，直接挂上CMSIS PACK就能跑。</p><p>不过，air001也进了pyOCD的<code>develop</code>分支：<a href="https://github.com/pyocd/pyOCD/pull/1612">Pull Request #1612 by kaidegit</a></p><p>Arduino似乎是不支持pyOCD，这是半糖提的Issue：</p><p><a href="https://github.com/arduino/arduino-ide/issues/2193">Using <code>PyOCD</code> as a debugger · Issue #2193 · arduino&#x2F;arduino-ide (github.com)</a></p><p>所以这东西似乎是假的，，，</p><img src="air001introduction/image-20230930133229413.png" alt="image-20230930133229413" style="zoom:80%;" /><h2 id="Arduino-support-Clion环境"><a href="#Arduino-support-Clion环境" class="headerlink" title="Arduino support-Clion环境"></a>Arduino support-Clion环境</h2><p>写了一半的教程删了，踩坑如下：</p><p>1.需要手动在CMake文件设置set(ARDUINO_SDK_PATH D:&#x2F;Develop&#x2F;arduino-1.8.19)</p><p>2.必须在这个cmake（\cmake\ArduinoToolchain.cmake）前面设置ARDUINO_SDK_PATH，在CMakeLists.txt文件里设置会发生奇怪的报错</p><p>3.Arduino support插件只支持老版本aurduino，不支持新出的ArduinoIDE（Arduino CLI），他会提示你版本不支持</p><p>4.Arduino support并不能自动加载你安装的库，需要手动导入boards.txt，查了半天才查出来</p><p>5.arduino support 设置在这种鬼地方：</p><img src="air001introduction/image-20230716104914282.png" alt="image-20230716104914282" style="zoom:50%;" /><p>6.Arduino自动将芯片包和库装在C:\Users\xxx\AppData\Local\Arduino15\下，找了半天，，而且不能通过设置修改位置（虽然能修改）</p><p>7.arduino support插件只支持一个boards.txt，切换不同的厂商还需要自己改boards.txt，逆天</p><img src="air001introduction/image-20230716105157297.png" alt="image-20230716105157297" style="zoom:50%;" /><p>8.board.txt在这种这么深的路径，还要你手动设置，还只能一次设置一个：C:\Users\xxx\AppData\Local\Arduino15\packages\AirM2M\hardware\AirMCU\0.2.3</p><p>9.编译又出问题了：</p><p><img src="/blog/air001introduction/image-20230716105334950.png" alt="image-20230716105334950"></p><p>这还玩**，我宝贵的三个小时。。</p><p><img src="/blog/air001introduction/image-20230716105434024.png" alt="image-20230716105434024"></p><p>Uninstall…</p><h2 id="VScode-Arduino环境"><a href="#VScode-Arduino环境" class="headerlink" title="VScode-Arduino环境"></a>VScode-Arduino环境</h2><h3 id="1-Arduino配置"><a href="#1-Arduino配置" class="headerlink" title="1.Arduino配置"></a>1.Arduino配置</h3><p>先看这个做到能烧录。比较简单</p><p><a href="https://wiki.luatos.com/chips/air001/Air001-Arduino.html">Air001基于Arduino的用户手册 - LuatOS 文档</a></p><h3 id="2-插件配置"><a href="#2-插件配置" class="headerlink" title="2.插件配置"></a>2.插件配置</h3><p>vscode中安装这个插件。</p><p><img src="/blog/air001introduction/image-20230716133814843.png" alt="image-20230716133814843"></p><p>打开<code>vscode</code>设置（快捷键<code>ctrl+,</code>），找到<code>arduino configuration</code></p><p>别的啥都不用管，把这个Use Arduino CLI给开开就行，不用填路径！</p><p>不然你需要安装旧版Arduino才行。</p><p><img src="/blog/air001introduction/image-20230716125810472.png" alt="image-20230716125810472"></p><p>然后打开一个用Arduino创建的项目（文件名和路径不能有中文、空格）。在右下角设置板子型号之类的信息。</p><p><img src="/blog/air001introduction/image-20230716125710319.png" alt="image-20230716125710319"></p><p>在这里尝试编译烧录：</p><p><img src="/blog/air001introduction/image-20230716130053261.png" alt="image-20230716130053261"></p><p>不出意外的话会出现这样一个warn：</p><p><img src="/blog/air001introduction/image-20230716130018049.png" alt="image-20230716130018049"></p><p>添加<code>&quot;output&quot;: &quot;./Arduino/build&quot;,</code></p><p><img src="/blog/air001introduction/image-20230716130136480.png" alt="image-20230716130136480"></p><p>注意：若你的编译或者上传出现这样的错误：</p><p><img src="/blog/air001introduction/image-20230716133023505.png" alt="image-20230716133023505"></p><p>请将刚才改的路径修改下：</p><p><img src="/blog/air001introduction/image-20230716133037539.png" alt="image-20230716133037539"></p><p>这个bulid路径不知道为什么特别严格，好像连纯ANSCII都不行，必须全英语小写（或者有长度限制）真是坑人。</p><p>更坑人的是，无论烧录是否成功，都告诉你Done.</p><p><img src="/blog/air001introduction/image-20230716133258208.png" alt="image-20230716133258208"></p><p>不知道怎么解决了。。。我只连一个烧录器，单片机都不连，都能Done…只能说佩服这插件了。</p><p>波浪线问题解决：</p><p><a href="https://blog.csdn.net/qq_45488242/article/details/108917794">(60条消息) 使用Visual Studio Code开发Arduino踩坑日记(持续更新)_鸿神的博客-CSDN博客</a></p><h2 id="HAL-CMake-Clion-PyOCD环境"><a href="#HAL-CMake-Clion-PyOCD环境" class="headerlink" title="HAL-CMake-Clion-PyOCD环境"></a>HAL-CMake-Clion-PyOCD环境</h2><p>有人造过轮子了：</p><p><a href="https://github.com/kaidegit/air001-cmake">kaidegit&#x2F;air001-cmake (github.com)</a></p><p>直接用就成。</p><p><strong>该仓库新的commit已经集成pyOCD命令，安装好直接用就成。</strong>下面的不一定要整。</p><p>Clion支持pyOCD，参考：<a href="https://www.jetbrains.com/help/clion/embedded-gdb-server.html">https://www.jetbrains.com/help/clion/embedded-gdb-server.html</a><br>python安装pyocd后<br>在此处即可添加配置。pyocd.exe在python安装目录&#x2F;scripts下。<br><a href="https://user-images.githubusercontent.com/93421418/263986541-472afc79-8ee6-415d-8b2c-a0b783a70493.png"><img src="/blog/air001introduction/263986541-472afc79-8ee6-415d-8b2c-a0b783a70493.png" alt="image"></a><br>可以选通用的cortex-m，即可调试。<br>但是若下载+调试，需要使用Keil Pack文件。<br>一个可用的配置是这样的：<br><a href="https://user-images.githubusercontent.com/93421418/263988457-9030fb46-e287-4a66-9cf6-0395b9c1c304.png"><img src="/blog/air001introduction/263988457-9030fb46-e287-4a66-9cf6-0395b9c1c304.png" alt="image"></a></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">gdbserver</span> -p <span class="hljs-number">29581</span> --pack=pack/Keil.AIR001_DFP.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.pack -t Air001Dev -f <span class="hljs-number">100</span>K<br></code></pre></td></tr></table></figure><p>此外：</p><p>可以将target改为m0plus，我不知道改了有什么好处，但是Air001是m0+内核，用m0plus应该好些（也可能也是个摆设</p><p>然后armgcc，目前（2023年9月30日）的版本最高可以支持到C++standard 26，可海星、</p><h2 id="借用py32的makefile"><a href="#借用py32的makefile" class="headerlink" title="借用py32的makefile"></a>借用py32的makefile</h2><p>上面已经说过，AIR001是py32f002A&#x2F;py32f003&#x2F;py32f030的<del>贴牌</del>同源产品，所以可以借用它的HAL库。有人已经做了makefile，gccarm的template：</p><p><a href="https://github.com/IOsetting/py32f0-template">IOsetting&#x2F;py32f0-template: Puya PY32F002A PY32F003 PY32F030 GNU GCC SDK, template and examples (github.com)</a></p><p>选择py32f002A&#x2F;003&#x2F;030就行。</p><p>打算以后学学Rust，主要是，c语言实在太古老，的语言层级抽象度实在太低。Rust还有统一的包管理，以及比较统一的嵌入式trait。</p><p>C++不是很想学，特性山嘛。</p>]]></content>
    
    
    
    <tags>
      
      <tag>嵌入式</tag>
      
      <tag>开发环境</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>小型摄像机解决方案调研</title>
    <link href="/blog/DVsolution/"/>
    <url>/blog/DVsolution/</url>
    
    <content type="html"><![CDATA[<h1 id="小型摄像机解决方案调研"><a href="#小型摄像机解决方案调研" class="headerlink" title="小型摄像机解决方案调研"></a>小型摄像机解决方案调研</h1><p>一直想自己做一台相机记录生活，这也是我四年前学电子的初衷。</p><p>现在回想起来，年轻真好，有什么想做的就去做，一切do it yourself，纯洁真好。</p><p>我这人太恋旧了啊，照片不舍得删，东西不舍得扔，想要记录生活的一切。</p><p>好了，说正事</p><p>这几年来我这一个都不算是电子行业从业者的人一直在调研小型摄像机各种芯片解决方案。</p><h2 id="爱好者级摄像头模组"><a href="#爱好者级摄像头模组" class="headerlink" title="爱好者级摄像头模组"></a>爱好者级摄像头模组</h2><p>先抄一段来自<a href="http://www.camera-module.com/blog/what-is-the-difference-between-VGA-SVGA-UXGA-XGA.html">camera-module.com</a>的显示分辨率格式，厂商们总是喜欢用这个描述，还要查表，直接贴到这里好了</p><blockquote><table><thead><tr><th><strong>Description</strong></th><th><strong>Code</strong></th><th><strong>Resolution</strong></th></tr></thead><tbody><tr><td>*(Color Graphics Adapter)</td><td>CGA</td><td>320 x 200</td></tr><tr><td>*(Enhanced Graphics Adapter)</td><td>EGA</td><td>640 x 350</td></tr><tr><td>(Video Graphics Array)</td><td>VGA</td><td>640 x 480</td></tr><tr><td>(Super Video Graphics Array)</td><td>SVGA</td><td>800 x 600</td></tr><tr><td>(High Definition Television 720i&#x2F;p)</td><td>HDTV</td><td>1280 x 720</td></tr><tr><td>(Extended Graphics Array)</td><td>XGA</td><td>1024 x 768</td></tr><tr><td>(Wide Extended Graphics Array)</td><td>WXGA</td><td>1366 x 768</td></tr><tr><td>(Super Extended Graphics Array)</td><td>SXGA</td><td>1280 x 1024</td></tr><tr><td>(Super Extended Graphics Array+)</td><td>SXGA+</td><td>1400 x 1050</td></tr><tr><td>(Wide Super Extended Graphics Array)</td><td>WSXGA</td><td>1600 x 1024</td></tr><tr><td>(Wide Super Extended Graphics Array+)</td><td>WSXGA+</td><td>1680 x 1050</td></tr><tr><td>(High Definition Television 1080i&#x2F;p)</td><td>HDTV</td><td>1920 x 1080</td></tr><tr><td>(Ultra Extended Graphics Array)</td><td>UXGA</td><td>1600 x 1200</td></tr><tr><td>(Wide Ultra Extended Graphics Array)</td><td>WUXGA</td><td>1920 x 1200</td></tr><tr><td>(Quad Extended Graphics Array)</td><td>QXGA</td><td>2048 x 1536</td></tr><tr><td>(Quad Super Extended Graphics Array)</td><td>QSXGA</td><td>2560 x 2048</td></tr><tr><td>(Wide Quad Super Extended Graphics Array)</td><td>WQSXGA</td><td>3200 x 2048</td></tr><tr><td>(Quad Ultra Extended Graphics Array)</td><td>QUXGA</td><td>3200 x 2400</td></tr><tr><td>(Wide Quad Ultra Extended Graphics Array)</td><td>WQUXGA</td><td>3840 x 2400</td></tr><tr><td>(Hex Super Extended Graphics Array)</td><td>HSXGA</td><td>5120 x 4096</td></tr><tr><td>(Wide Hex Super Extended Graphics Array)</td><td>WHSXGA</td><td>6400 x 4096</td></tr><tr><td>(Hex Ultra Extended Graphics Array)</td><td>HUXGA</td><td>6400 x 4800</td></tr><tr><td>(Wide Hex Ultra Extended Graphics Array)</td><td>WHUXGA</td><td>7680 x 4800</td></tr></tbody></table></blockquote><p>先科普下，索尼，OMNIVISION这些公司出货的视频传感器一般是这样的芯片：</p><p><img src="/blog/DVsolution/image-20230614192836783.png" alt="image-20230614192836783"></p><p>像是OV2640就是四分之一英寸的传感器。</p><p>然后，再由摄像头模组厂做外壳排线接口镜片，包装成不同长度，不同角度的摄像头：</p><img src="DVsolution/image-20231231214118866.png" alt="image-20231231214118866" style="zoom:80%;" /><p>也许是DIY摄像头之类的人太少，除了玩单片机时最最最常用的OV7670，OV2640这种很热的型号，其它的型号的摄像头模组都很贵，广角的也比68度视角的贵很多，很多摄像头模组也买不到零售，连传感器都很难买到。</p><p>还有一些清晰度比较高的视频传感器的电路板直接贴视频传感器芯片，然后直接将镜片镜筒固定在主板或者外壳上，这种也是蛮不立于DIY的，不然又得采购镜片，研究光学成像，画镜筒模型……但是遗憾的是高分辨率很多都是这种。</p><p><img src="/blog/DVsolution/image-20230614193311135.png" alt="image-20230614193311135"></p><p>民用级（准确来说是电子爱好者级）的DVP摄像头模组，可以选的不多，比较常用的有：</p><table><thead><tr><th>模组</th><th>性能</th><th>参考价格</th><th>备注</th><th>发布时间</th></tr></thead><tbody><tr><td>OV7670</td><td>640 x 480@30fps</td><td>7元</td><td></td><td>2005</td></tr><tr><td>GC0308</td><td>640(H) x 480(V)</td><td>8元</td><td></td><td></td></tr><tr><td>OV9655</td><td>1280 x 1024 15fps VGA 30fps 说明：有卖家说能替代老旧的OV2640，疑似瞎说</td><td>6元</td><td></td><td>2005</td></tr><tr><td>OV2640</td><td>1600×1200@15fps SVGA@30fps   CIF@60fps</td><td>7元</td><td>支持JPEG</td><td>2006</td></tr><tr><td>OV3640</td><td>2048×1536@15fps 1024×768@30fps</td><td>18元</td><td>支持JPEG</td><td>2008</td></tr><tr><td>OV3660</td><td>2048×1536@15fps 1080p@20fps 720p@45fps VGA@60fps QVGA@120fps</td><td>16元</td><td>支持JPEG</td><td>2011</td></tr><tr><td>OV5640</td><td>5MP@15fps 1080p@30fps 720p@60fps VGA@90fps QVGA@120fps</td><td>23元</td><td>支持JPEG</td><td>2012</td></tr><tr><td>OV5642</td><td>5MP@15fps 1080p@30fps 720p@60fps VGA@90fps QVGA@120fps</td><td>34元</td><td>支持JPEG</td><td>2008</td></tr></tbody></table><p>注1：价格来自淘宝，2023年6月</p><p>注2：以上均为窄角度镜头，若广角镜头价格要增加不少</p><p>注3：参考：<a href="https://www.arducam.com/ov2640/">OV2640: Specs, Camera, Datasheet &amp; Alternative (2022 Report) (arducam.com)</a></p><p><a href="http://www.ovt.com/">www.ovt.com</a></p><p>注4：以上CMOS模组都是比较老（上述网站说end-of-life）的，咱们作为电子爱好者，没办法了属于是</p><p>果然摄像头和单片机性能很挂钩啊，查OV7670一堆STM32模组，查OV2640的淘宝广告都是说支持ESP32，查3660说支持ESP32，K210，查5640都变成了荔枝派树莓派……</p><h2 id="主控芯片"><a href="#主控芯片" class="headerlink" title="主控芯片"></a>主控芯片</h2><p>摄像头芯片一般若想低功耗价格便宜还能编码视频，一般通用MCU做不到的，基本要选用高性能MCU或者带视频编码硬件的才行。主控芯片其实有好几个很明显的分水岭，我按照清晰度对主控芯片分个类。是按照xP@15fps进行分类，其实这些都支持更高像素的拍照。</p><p>其实有好几个分区，720P是个门槛，1080P是个门槛，2K是个门槛。</p><p>720P以下的就是通用单片机，720P，1080P的是一些老产品或者低端产品，但基本上都是LQFP、QFN封装的小芯片，也是我的目标范围，2K4K8K的基本都是BGA封装，DDR3内存，甚至linux、安卓，不是穷逼能玩得起的了。表格按照低端到高端。</p><p>说明：因为大部分厂商都不开源，啥都查不到，有些话是自己的猜想，欢迎各位指正。</p><table><thead><tr><th>层级</th><th>芯片</th><th>资料情况</th><th>产品情况</th><th>个人购买</th></tr></thead><tbody><tr><td>480P不及</td><td>STM32(之类通用单片机)低端产品</td><td>很多</td><td>只能应用于拍照了</td><td>很多</td></tr><tr><td>720P</td><td>STM32(之类通用单片机)中高端产品</td><td>很多</td><td>性价比太低</td><td>很多</td></tr><tr><td>480P</td><td>ESP32</td><td>很多</td><td>只能应用于拍照了，视频不大行但听说能720P拍几帧</td><td>很多</td></tr><tr><td>720P</td><td>杰理开源产品AC79</td><td>海星（海星）</td><td>720P有点拉15FPS勉强，但支持WIFI</td><td>能买到</td></tr><tr><td>720P，1080P，2K</td><td>杰理闭源产品老DV系列</td><td>完全查不到一点资料</td><td>市场上应用很多销量很好，我所知道的产品不支持WIFI，需要模块</td><td>买不到</td></tr><tr><td>1080P，2K，4K</td><td>杰理新闭源产品</td><td>完全没有，SDK收费几个W，找人开发也要几个W</td><td>听说是市场新秀，行车记录仪市场占比很高</td><td>买不到</td></tr><tr><td>720P，1080P</td><td>凌通老产品</td><td>网上可以下载SDK(少数型号)，可以搜到三篇使用博客。找不到详细的产品选型资料，具有产品GPCV1248，GPCV6624等，销量很大</td><td>15年左右行车记录仪应用、销量很大，见过实物卡录</td><td>淘宝少数店铺可购买</td></tr><tr><td>2K，4K</td><td>凌通新产品</td><td>无</td><td>未知</td><td>买不到</td></tr><tr><td>720P</td><td>建荣&#x2F;卓荣</td><td>可以买到SDK，无了</td><td>见过实物卡录</td><td>买不到</td></tr><tr><td>1080P，2K，4K</td><td>联咏</td><td>资料比较少</td><td>行车记录仪听说挺多</td><td>能买到</td></tr><tr><td>1080P，2K，4K，8K(linux)</td><td>海思</td><td>少</td><td>执法记录仪之类的应用比较多</td><td>比较好买</td></tr><tr><td>1080P，2K，4K(linux)</td><td>国科微</td><td>海思兼容替代</td><td>听说还行</td><td>好买</td></tr><tr><td>1080P，2K，4K，8K(linux)</td><td>瑞芯微</td><td>资料还行</td><td>玩的人不少想必应用也多，搞机器视觉的不少</td><td>比较好买</td></tr><tr><td>1080P，2K，4K，8K(linux)</td><td>全志</td><td>资料还行</td><td>应用比较多</td><td>好买</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="STM32等通用MCU"><a href="#STM32等通用MCU" class="headerlink" title="STM32等通用MCU"></a>STM32等通用MCU</h3><p>能查到资料很多，但是毕竟没有硬件编码模块，视频性能一般。</p><p>STM32F4听他们说新产品很少用了。其它高性能MCU同样的视频性能（无硬件支持）基本上价格也比专门的DV芯片贵。</p><h3 id="ESP32-Espressif"><a href="#ESP32-Espressif" class="headerlink" title="ESP32(Espressif)"></a>ESP32(Espressif)</h3><p>ESP32是一款物联网芯片，近几年以其规范的文档代码，开放的社区，便宜的芯片，丰富的外设，和WIFI蓝牙支持，成了开源界的大哥。ESP_CAM模块卖的超级好，资料也很全。更是以支持Arduino吸引了不少小白。但我个人非常不推荐Arduino，太难用了，自由度太低，很多接口的参数写死。</p><p><a href="https://github.com/espressif/esp32-camera">espressif&#x2F;esp32-camera (github.com)</a></p><p>但是毕竟是240Mhz物联网MCU嘛，视频性能就有点差了，听说720P只能跑几帧的，还不带录音。</p><p>明年（2023）出的ESP32-P4可以期待一下，双核400Mhz，具有MIPI接口，H.264 编码支持，如果明年出了的话，将是对我来说最合适的芯片。</p><h3 id="杰理-jieli-开源产品AC79"><a href="#杰理-jieli-开源产品AC79" class="headerlink" title="杰理(jieli)开源产品AC79"></a>杰理(jieli)开源产品AC79</h3><p><img src="/blog/DVsolution/image-20230614204444831.png" alt="image-20230614204444831"></p><p>杰理不知道怎么了突然大发慈悲开源了几款芯片。杰理的开源芯片都用于视频录像的目前只有AC79，资料较为完备，有官方文档官方群，视频性能比较差劲，主要是VGA(640*480)清晰度，标称720p30fps，据说效果不好。价格10r&#x2F;pcs。群里有工程师说，今年会推出视频性能更好的芯片。截止到2023年6月尚未发布。</p><p>杰理毕竟是长期的闭源厂，资料并不是很多，单片机经验少的话谨慎考虑。</p><p>AC79 SoC：USB1.1、USB2.0（可以方便的当做读卡器）双核DSP，最高主频320Mhz。支持JPEG编码，最大支持720P@30fps@AVI封装，支持WiFi蓝牙，支持视频传输，支持DVP-1&#x2F;2&#x2F;4&#x2F;8bit、 BT656图像传感器接口的YUV sensor，最大支持720P分辨率，可以说应用层的例程还蛮多，这个产品官方给的示例有无人机图传啊，儿童相机之类，视频性能一般。</p><p><a href="https://doc.zh-jieli.com/AC79/zh-cn/master/index.html">杰理 JieLi_AC79 开源项目文档 — JL Project Documentation (zh-jieli.com)</a></p><h3 id="杰理-jieli-闭源产品"><a href="#杰理-jieli-闭源产品" class="headerlink" title="杰理(jieli)闭源产品"></a>杰理(jieli)闭源产品</h3><p>杰理是最近几年在蓝牙视频方面实力很强的公司，产品较为先进，进年来市场占有率增长极快。但是多数适用于行车记录仪的产品并不开源如杰理dv系列，dv15，dv16等，据悉有更新的产品，性能依旧不错，价格也比较好，但是全方位闭源，我见过的应用有卡录等，我也买到过杰理IC的卡录。</p><h3 id="凌通-Generalplus"><a href="#凌通-Generalplus" class="headerlink" title="凌通(Generalplus)"></a>凌通(Generalplus)</h3><p><img src="/blog/DVsolution/image-20230614204434772.png" alt="image-20230614204434772"></p><p>网上可以下载SDK(少数型号)，可以搜到三篇使用博客。找不到详细的产品选型资料，具有产品GPCV1248，GPCV6624等<br>GPVC1248等明星产品发布时间较早，像素较低，功耗较大。新产品资料过少。<br>这是一个行车记录仪电路板。<a href="https://www.amobbs.com/thread-5694591-1-1.html">https://www.amobbs.com/thread-5694591-1-1.html</a><br>可以在淘宝(少数几个店铺)上买到几款芯片和开发版。<br>官网只显示少数几个型号，总体看来频率较低，网上有资料的老产品大多数较为落后(但是并不算落后)，新产品信息较少。网上可查到的产品均为LQFP封装，比如1248为LQFP128封装。</p><p><img src="/blog/DVsolution/image-20230614203118124.png" alt="image-20230614203118124"></p><p>凌通官网说他最小48pin，我也见过凌通的48pin产品GPCV4225（拆解获得），但是查不到。官网就两本Datasheet。</p><p>他的开发板长这样：</p><blockquote><p>最近因为项目需要，购买了这块凌通开发板进行开发，凌通这个平台是台湾创建的，所以在深圳那边的市场会比较大，核心技术基本上都掌握在凌通原厂以及一些台湾芯片供应商那里，往大陆里面更进一些估计就很少接触凌通这款芯片的开发设计，但是平时用的行车记录仪却很有可能是凌通产的，毕竟价格摆在那里，实现的功能也和市面上的差不多，下面是这款开发板硬件平台的介绍.</p><p><img src="/blog/DVsolution/image-20230614203605990.png" alt="image-20230614203605990"></p><p>————————————————<br>版权声明：本文为CSDN博主「浮生若梦，学海无涯」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/weixin_41586634/article/details/88741670">https://blog.csdn.net/weixin_41586634/article/details/88741670</a></p></blockquote><p>这是那三页博客，可谓弥足珍贵了，这位博主还贴心的给了SDK。</p><p><a href="https://blog.csdn.net/weixin_41586634/article/details/88741670">凌通DRV方案 ( 一、GPCV1248开发板主平台介绍 )_浮生若梦，学海无涯的博客-CSDN博客</a></p><p><a href="https://blog.csdn.net/weixin_41586634/article/details/88793199">凌通DRV方案 (二、GPCV1248芯片手册分析 )_凌通芯片_浮生若梦，学海无涯的博客-CSDN博客</a></p><p><a href="https://blog.csdn.net/weixin_41586634/article/details/88795057">凌通DRV方案 (三、固件的制作和烧录详解 )_浮生若梦，学海无涯的博客-CSDN博客</a></p><p>为了防止资料丢失，我还准备了网页备份：</p><p>[一、GPCV1248开发板主平台介绍](DVsolution&#x2F;凌通DRV方案 ( 一、GPCV1248开发板主平台介绍 )_浮生若梦，学海无涯的博客-CSDN博客.mhtml)</p><p>[二、GPCV1248芯片手册分析](DVsolution&#x2F;凌通DRV方案 (二、GPCV1248芯片手册分析 )_浮生若梦，学海无涯的博客-CSDN博客.mhtml)</p><p>[三、固件的制作和烧录详解](DVsolution&#x2F;凌通DRV方案 (三、固件的制作和烧录详解 )_浮生若梦，学海无涯的博客-CSDN博客.mhtml)</p><h3 id="建荣-卓荣-AppoTech"><a href="#建荣-卓荣-AppoTech" class="headerlink" title="建荣&#x2F;卓荣(AppoTech)"></a>建荣&#x2F;卓荣(AppoTech)</h3><p><img src="/blog/DVsolution/image-20230614204421480.png" alt="image-20230614204421480"></p><p>是同一家公司，后来改名叫卓荣了，这个logo我也拆卡录拆到过</p><img src="DVsolution/image-20230614204715289.png" alt="image-20230614204715289" style="zoom:50%;" /><p>这三款产品的页面似乎都是复制粘贴，规格都是：</p><p><img src="/blog/DVsolution/image-20230614205240331.png" alt="image-20230614205240331"></p><p><img src="/blog/DVsolution/image-20230614205303953.png" alt="image-20230614205303953"></p><p>很久以前也查过他们家资料，这次居然发现网上（CSDN等）可以买到AX3233的SDK。去他妈CSDN。</p><p>除此之外查不到什么资料。</p><p>闲鱼上有一些废品卡录，大眼一看也是卓荣logo。</p><h3 id="联咏-Novatek"><a href="#联咏-Novatek" class="headerlink" title="联咏(Novatek)"></a>联咏(Novatek)</h3><p>NT96650，NT96655，NT96663明星产品，也属于高端产品系列，配套索尼的传感器为主。</p><p>也是行车记录仪用的很多的方案。</p><p>资料比较少，可以查到SDK：<a href="https://github.com/nikitos1550/some_novatek_sdk">nikitos1550&#x2F;some_novatek_sdk (github.com)</a>，淘宝上也有一些开发板但也挺少</p><h3 id="海思-Hisilicon"><a href="#海思-Hisilicon" class="headerlink" title="海思(Hisilicon)"></a>海思(Hisilicon)</h3><p>属于华为集团，中国大陆最大的无晶圆厂芯片设计公司，最近某些原因导致的缺货也影响到了摄像业务。海思毕竟是华为的，其产品也有执法记录仪应用，我猜国内海思芯片的比较多。（找了几个拆解视频，一个是安霸芯片，这个牌子也做行车记录仪，个人很难接触了，另一个直接上MTK了，打脸了）</p><p>执法记录仪，监控等设备应用广泛，前几年见到一个芯片代理发朋友圈，七十多片Hi芯片余货卖。主要针对1080p，4k等高端领域，几乎都是BGA封装。芯片价格较贵，几十元不等，常见产品有Hi3516DV300(主频900mhz)等IPcamera芯片，大多数需要搭配DDR3内存，网上资料全，sensor较贵，量产大概要直接用传感器芯片，自己做镜片部分。海思的移动相机也有方案，但是比较睾端。</p><img src="DVsolution/image-20231231212835047.png" alt="image-20231231212835047" style="zoom:50%;" /><p>海思的SDK也是半开放状态，但是想从官方那弄，没门</p><p><img src="/blog/DVsolution/image-20230615002140720.png" alt="image-20230615002140720"></p><h4 id="Hi3516DV300"><a href="#Hi3516DV300" class="headerlink" title="Hi3516DV300"></a>Hi3516DV300</h4><p>双核 ARM Cortex-A7@ 900MHz，集成POR、 RTC、Audio Codec以及待机唤醒电路，H.264&#x2F;H.265 编解码最大宽度 3072，最大分辨率 3072x1728，2688x1536@30fps编码+720x480@30fps编码（多码流），支持h.264&#x2F;265&#x2F;jpeg编码，三四十块钱，还支持一堆视频处理功能。</p><h4 id="Hi3516EV200"><a href="#Hi3516EV200" class="headerlink" title="Hi3516EV200"></a>Hi3516EV200</h4><p>后来在查国科微的时候查到海思一款Hi3516EV200</p><p>ARM Cortex A7@ 900MHz，H.264&#x2F;H.265 编码可支持最大分辨率为 2304x1296，宽度最大 2304</p><p>H.264&#x2F;H.265 多码流实时编码能力：<br>− 2048x1536@20fps+720x576@20fps<br>− 2304x1296@20fps+720x576@20fps<br>− 1920x1080@30fps+720x576@30fps<br>• 支持 JPEG 抓拍 3M（2304x1296）@5fps</p><p>支持MIPI、LVDS&#x2F;Sub-LVDS、HiSPi接口<br>支持与SONY、ON、OmniVision、 Panasonic等主流高清CMOS sensor对接</p><p><img src="/blog/DVsolution/image-20230615001422822.png" alt="image-20230615001422822"></p><p>这颗芯片有大佬做开发板，但是应该寄了，网站也挂了。</p><p>主要在whycan上有些讨论。<a href="https://whycan.com/t_4466.html">海思入门级开发板Hi3516EV200 正式预售&#x2F; DOPI开源摄像头(HI3516&#x2F;HI3518) &#x2F; WhyCan Forum(哇酷开发者社区)</a></p><h3 id="国科微-gokemicro"><a href="#国科微-gokemicro" class="headerlink" title="国科微(gokemicro)"></a>国科微(gokemicro)</h3><p>有一些海思pin to pin兼容替代，如果GK7205RNCFV200，闲鱼淘宝价格在12元左右，有好几个海思的替换芯片</p><p>GK7205V200 12元闲鱼  PtP  Hi3516EV200</p><p>GK7205V300  20多元  PtP  Hi3516EV300</p><h3 id="瑞芯微-Rockchip"><a href="#瑞芯微-Rockchip" class="headerlink" title="瑞芯微(Rockchip)"></a>瑞芯微(Rockchip)</h3><p>RV1109&#x2F;1126&#x2F;1108是瑞芯微比较经典的产品，新品有RK33XX，但是频率也上1GHz，也需要DDR3芯片，支持2K、4K，属于ARM高端产品了，网上查好像用作AI机器视觉的比较多，看来性能不错，DIY成本比较高，但是资料能查到不少，可以下载到SDK，<a href="https://github.com/rockchip-linux/rknpu2">rockchip-linux&#x2F;rknpu2 (github.com)</a>，能买到开发板，开发板也有好多专业的附带资料，该公司的新产品也能支持到8K。如果只做硬件开发的话还不错，而且芯片也是比较新的，和那些用ADS1.2的远古凌通没法比。</p><p>范围和海思比较重合。资料数量也差不多，可能海思多点。</p><p><a href="http://www.rock-chips.com/a/cn/product/RV11xilie/2017/0118/827.html">RV1108</a> 30元左右</p><p><a href="http://www.rock-chips.com/a/cn/product/RV11xilie/2020/0427/1075.html">RV1126</a> 80元左右</p><p>瑞芯微最近新出了RV1103,RV1106，<strong>最高达0.5TOPs算力</strong>，视频编解码能力一流。据说前者拿货价在25左右（淘宝30）。是为AI机器视觉做的芯片，前者有QFN88封装，后者是BGA。</p><p><a href="https://wiki.luckfox.com/zh/Luckfox-Pico/Luckfox-Pico-quick-start/">幸狐</a>出了好几款RV1103,RV1106的开发板，RV1103的最便宜才39，所以我猜，要么是有原厂推销的原因，要么是，实际拿货价要更低。</p><h3 id="全志-Allwinner"><a href="#全志-Allwinner" class="headerlink" title="全志(Allwinner)"></a>全志(Allwinner)</h3><p>全志是国内比较有名的高端ARM芯片厂，也是最近在搞什么AI VR那种高端厂商，“和瑞芯微的产品应用领域高度相关。 形成直接竞争关系。”全志H系列很久以前都听说过。看拆解的行车记录仪有用的全志A10，听说全志的行车记录仪主要是安卓机，我也不清楚。总之是比较高端了。全志的V3s（这一片是LQFP，价格22左右）是全志为入门级行车记录仪（1080P双路）打造的芯片，但是被玩做高端ARM单片机的也不少，因此资料还挺多。</p><p>全志的主要都是linux，安卓了。我对此了解也不多。国内有不少玩全志芯片的大佬。</p><p><a href="https://bbs.elecfans.com/jishu_2322226_1_1.html">【开源硬件大赛】基于全志V853的AI智能行驶记录仪 - 全志科技 - 电子技术论坛 - 广受欢迎的专业电子论坛! (elecfans.com)</a></p><p>全志有两颗芯片比较受爱好者喜爱，分别是V3s，F1c100s&#x2F;200s，都内置DDR。前者视频能力好点，TB22左右。F1c100s&#x2F;200s十块钱出头，但是官方手册里只有MJPEG 720p@30fps的编码能力。</p><p>这两颗芯片也是比较推荐的。</p><p><a href="https://whycan.com/t_5073.html">v3s&#x2F;s3的H264编码 &#x2F; 全志 SOC &#x2F; WhyCan Forum(哇酷开发者社区)</a></p><h2 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h2><p><a href="https://github.com/OpenIPC">OpenIPC (github.com)</a></p><p>OpenIPC是来自开放社区的开源操作系统，针对来自多家制造商的带有ARM和MIPS处理器的IP摄像机 为了取代封闭的、不透明的、不安全的、经常被遗弃和不支持的 供应商预安装的固件。</p><p>佩服这些敢于给产品重写固件的开源项目，真的是太厉害了。</p><p><a href="https://www.arducam.com/%E7%9C%8B%E5%88%B0%E4%B8%80%E4%B8%AAopenHD%E9%A1%B9%E7%9B%AE%EF%BC%8C">https://www.arducam.com/看到一个openHD项目，</a></p><p>用的Pi + IMX477<a href="https://github.com/OpenHD/OpenHD">OpenHD&#x2F;OpenHD: OpenHD (github.com)</a></p><h2 id="我的窘境"><a href="#我的窘境" class="headerlink" title="我的窘境"></a>我的窘境</h2><p>我用不着动辄BGA，我也不会焊不是，现在就是找不到一款1080P的价格合适功耗合适芯片，有时有事没事就上网查，自己也拆了些无人机卡录，方案主要是凌通，杰理，卓荣，但是都不开源，，，只有凌通有一点远古资料。两年了没什么进展，唯一的就是杰理发布的AC79吧，但是视频性能也不行。杰理的老DV系列其实很合适，但是，不开源，一点资料都没有，啥都查不到，咱又是自己玩，不是做产品。</p><img src="DVsolution/image-20230614221444372.png" alt="image-20230614221444372" style="zoom:50%;" /><p>杰理未知型号卡录</p><p>2023年12月31日更新：其实上linux也是个不错的选择，RV1103，F1C200S，都有QFN封装。不过，我打算等等ESP32-P4。</p><h2 id="关于开源"><a href="#关于开源" class="headerlink" title="关于开源"></a>关于开源</h2><p>国内这些开源厂商，借用别人的话，恨不得你先定1kk的货再给你datasheet，都是藏着掖着，一个SDK授权费几万，真是缺德。</p><p>另外今天也查到了点国外的资料，还是好多了的。比如哪个OpenIPC，让我想起了00年代大家给MP3刷固件（虽然没经历过）的时光。现在看到一些MP3固件网，再反观现在国内的一些IC公司，不禁感慨万千。</p>]]></content>
    
    
    
    <tags>
      
      <tag>硬件</tag>
      
      <tag>摄像</tag>
      
      <tag>方案调研</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>窝逝去的2022</title>
    <link href="/blog/2022/"/>
    <url>/blog/2022/</url>
    
    <content type="html"><![CDATA[<p>看大佬都要写年终总结，这似乎价值不大的东西，但是还是要写一写。不能再寄下去了。</p><h2 id="学业"><a href="#学业" class="headerlink" title="学业"></a>学业</h2><p>不能多说还是蛮难受，寄又没完全寄。</p><p>今年前半年完全没有碰代码，后半年也很少，是摸鱼的一年呢。</p><p>虽然10月末开始网课直到现在，但是网课大部分科目也废了，项目也摸了。</p><h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><img src="2022/image-20230116143439150.png" alt="image-20230116143439150" style="zoom:50%;" /><p>看我的项目目录其实一点也不空虚。30个项目呢，但是大多都中道崩殂了。</p><h3 id="1-继续维护"><a href="#1-继续维护" class="headerlink" title="1.继续维护"></a>1.继续维护</h3><p>我真的维护了吗……</p><img src="2022/image-20230116143721875.png" alt="image-20230116143721875" style="zoom:50%;" /><p>服务器的转移是写后端的朋友整的，我似乎也就是一个月看一回有多少用户吧。</p><h3 id="2-新的项目"><a href="#2-新的项目" class="headerlink" title="2.新的项目"></a>2.新的项目</h3><p>基本是断断续续的，xx前几天又整了两天，然后继续躺平。学业的紧张让我无法再推进任何项目。</p><p>xx的初步解析已经基本完毕了其实。但是，躺。</p><h3 id="3-ESP32的折腾"><a href="#3-ESP32的折腾" class="headerlink" title="3.ESP32的折腾"></a>3.ESP32的折腾</h3><p>今年学了ESP-IDF啊，比arduino好用多了，看大佬们也是在表扬ESP-IDF。去年年末今年年初，做了一台简易的机器，有电子相册的功能，对接了QQ机器人（服务器端），实现了单片机QQ版本（服务器端是朋友做的），基本只有文字功能，称不上算是项目。arduino做的。界面太寄了。</p><p>今年11月用ESP-IDF重写了，顺便学了点LVGL，但是确实嵌入式很耽误时间，一个问题可以困扰人很长时间。说来哪个领域都是啊。。。</p><h3 id="4-接了嵌入式外包"><a href="#4-接了嵌入式外包" class="headerlink" title="4.接了嵌入式外包"></a>4.接了嵌入式外包</h3><p>他自己也承认是层层外包。第一个人画了两张板子和300行代码挣了1K，第二个是个公司，1K代码和硬件的一些折腾，挣了2K。</p><p>最好的地方是，我现在也没什么花钱的地方，挣到了这个钱也就基本打消了我最近挣钱的念头，如果一直考虑钱的话，会很浪费时间。</p><img src="2022/image-20230116145217889.png" alt="image-20230116145217889" style="zoom:50%;" /><p>第一个项目是ESP32，第二个项目是合宙物联网转STC单片机（我自己挑的）</p><p>所以，知识就是钱啊，我应该学习充盈自己而不是急于赚钱。</p><h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><h3 id="学了一点点"><a href="#学了一点点" class="headerlink" title="学了一点点"></a>学了一点点</h3><p>ESP-IDF</p><p>LVGL</p><p>STC 51单片机</p><h3 id="基本没学"><a href="#基本没学" class="headerlink" title="基本没学"></a>基本没学</h3><p>基本是立项后就没下文了：</p><p>openCV</p><p>windows逆向</p><p>Unity</p><p>还真的只有这么多啊……</p><h2 id="明年"><a href="#明年" class="headerlink" title="明年"></a>明年</h2><p>立一些flag吧，在明年的总结中来检查</p><p>1.英语学习到学校前10%的水平</p><p>2.理科成绩维持前50</p><p><del>连目标都定不出来了啊</del></p><p>3.读25本书</p><p>4.字迹自己可以看的下去</p><p>5.坚持每天锻炼身体</p><p>编程方面……再坚持一段时间吧，寒假一周暑假两周而且不再有网课的未来，太难顶。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/blog/hello-world/"/>
    <url>/blog/hello-world/</url>
    
    <content type="html"><![CDATA[<p>学着写Blog了。</p><p>主要是觉得自己写了不少程序，这些程序注释简单、可读性差，自己用起来都不方便，而且过一段时间就什么都不记得了。当然。没往git上面上传。以后就先拿这个blog当笔记本好了。</p><p>我是谁呢，一个想学画画的咸鱼。</p><p>好了，个人介绍写完了。我的blog的主页的“ABOUT”就可以指向这篇文章了。</p><blockquote><p>学着写Blog了。</p></blockquote><p>学谁呢？学的是他。<a href="https://blog.hsojo.com/">https://blog.hsojo.com/</a></p><p><img src="/blog/hello-world/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.jpg"></p><p>看了他一篇2017年的文章，感觉很厉害，参加那么多竞赛获奖，是一个很厉害的人罢！</p><p><a href="https://blog.hsojo.com/2017/12/31/My2017/">窝逝去的2017</a></p><p>那么。Hello World。</p><p>emmmm，调试了好久终于摸懂hexo的图片管理了。html的文件路径看来不能用&quot;\&quot;，而把图片拖拽进Typora的默认路径是&quot;\&quot;……</p><p>emmmm,”\&quot;是markdown语法，……还要打转义符……</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
